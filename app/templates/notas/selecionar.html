{% extends 'base.html' %}
{% block title %}Selecionar Turma e Disciplina{% endblock %}
{% block content %}
<h2>Selecionar Turma e Disciplina</h2>
<form id="formSelecao">
    <div class="mb-3">
        <label for="turma_id" class="form-label">Turma</label>
        <select name="turma_id" class="form-select" required>
            {% for turma in turmas %}
                <option value="{{ turma.id }}">{{ turma.nome }} - {{ turma.codigo }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label for="disciplina_id" class="form-label">Disciplina</label>
        <select name="disciplina_id" class="form-select" required>
            {% for d in disciplinas %}
                <option value="{{ d.id }}">{{ d.nome }} ({{ d.sigla }})</option>
            {% endfor %}
        </select>
    </div>

    <button type="button" class="btn btn-primary" onclick="redirecionar()">Continuar</button>
</form>

<script>
function redirecionar() {
    const turmaId = document.querySelector('[name=turma_id]').value;
    const disciplinaId = document.querySelector('[name=disciplina_id]').value;

    if (turmaId && disciplinaId) {
        const url = `/notas/lancar/${turmaId}/${disciplinaId}`;
        window.location.href = url;
    } else {
        alert('Por favor, selecione a turma e a disciplina.');
    }
}
</script>
{% endblock %}
